<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="author" content="Ken Collins">
    <meta name="google-site-verification" content="W3DG-CkoWHypH24OfrGmGbMezvhC6AyLql4jLI7hXhI">
    <title>
      MetaSkills.net Reborn on Mephisto @MetaSkills.net
    </title>
    <link rel="alternate" type="application/atom+xml" href="http://feeds.feedburner.com/metaskills" title="MetaSkills.net">
    <link rel="author" href="mailto:ken@metaskills.net">
    <link rel="stylesheet" href="/resource/reset.css">
    <link rel="stylesheet" href="/resource/site.css">
    <link rel="shortcut icon" href="/favicon.png">
    <script src="/resource/jquery-1.7.1.min.js">
</script>
    <script src="/resource/site.js">
</script>
  </head>
  <body>
    <header id="mast">
      <div class="content">
        <section id="identity">
          <div id="avatar"></div>
          <div>
            MetaSkills.net
          </div>
          <div>
            Coding things under other things!
          </div>
        </section>
        <nav>
          <ul>
            <li>
              <a href="/" class="button" data-icon="H">Home</a>
            </li>
            <li>
              <a href="/pages/colophon.html" class="button" data-icon="U">About Me</a>
            </li>
            <li>
              <a href="/pages/projects.html" class="button" data-icon="x">Projects</a>
            </li>
            <li>
              <a href="/pages/resume.html" class="button" data-icon="N">Resume</a>
            </li>
            <li>
              <a href="http://twitter.com/metaskills" class="button" data-icon="B">Twitter</a>
            </li>
            <li>
              <a href="/archive.html" class="button" data-icon="l">Archives</a>
            </li>
          </ul>
        </nav>
      </div>
    </header>
    <section id="page">
      <section id="content">
        <article id="post">
          <header>
            <time pubdate="" datetime="2008-03-22T00:00:00-04:00"><span class="day">22</span> <span class="month">Mar</span> <span class=
            "year">2008</span></time>
            <h1>
              MetaSkills.net Reborn on Mephisto
            </h1>
          </header>
          <p>
            <img src="/assets/drax.png" alt="Drax" class="floatr ml20"> Well after a year of neglect, the MetaSkills.net blog has been <a href=
            "/2008/03/22/metaskills-net-reborn-on-mephisto/">reborn on Mephisto</a>. Previously I was using Drupal and it finally got to a point
            where I was so deep into ruby that I did not even have the gumption to open up a PHP session to publish anything. The sad part is that I
            told myself that this PHP disdain would help me get off my butt and move to Mephisto. You know, eat my own dog food â€“ obviously
            procrastination won out â€“ but not forever. For the past week I worked hard to get the Meta theme for Drupal converted to Mephisto. You
            can use this theme yourself if you want, the source is available on <a href="http://github.com/metaskills/metatheme/tree/master">my
            github</a> and I am making updates often. Heck... feel free to fork the project and make some changes or let me know if you want me to
            incorporate them into mine.
          </p>
          <p>
            Here are a few things that I liked about rewriting the Meta theme for Mephisto. First, unlike Drupal, the administration of your Mephisto
            blog is not inline, but all tucked away in a private admin section. When you make a theme in Drupal, you are burdened to to the task of
            coding all the admin CSS for the inline admin features. The Meta theme had over 500 lines of CSS just for the Drupal administration. That
            is all gone and I love keeping theme code focused on doing nothing but presenting the "user" experience.
          </p>
          <p>
            Also, when I first wrote the Meta theme I was just a JavaScript beginner. Nowadays I am pretty good at it and have moved away from the
            simple script like functions that pass arguments around into a full OO style that spawns from smart classes and a persistent state. The
            Meta theme is now 100% on Prototype and all the interactive features are tightly knit into the MetaTools, MetaSearch, and MetaContent
            classes. Take a look at the meta.js source if you want. Lastly, if you are on an old Drupal blog looking to get over to Mephisto, maybe
            this migration script will help.
          </p>
          <h2>
            Migration from Drupal to Mephisto
          </h2>
          <p>
            This script is what I used in the rails console to populate data from my old Drupal 4.7 blog to Mephisto. This code is untested on the
            schema of higher versions of Drupal.
          </p>
          <div>
            <div class="CodeRay">
              <div class="code">
                <pre>
<span class="comment"># My Drupal 4.7 to Mephisto Script</span>
<span class="comment"># ----------------------------------------------------------------</span>
<span class="comment"># Things I did before</span>
<span class="comment">#   * Delete all rows from drupal node table where type != 'blog'</span>
<span class="comment">#   * Remove the type column from the drupal node table</span>
<span class="comment"># </span>
<span class="comment"># Things I did afterward</span>
<span class="comment">#   * Found all comments in the Mephisto contents table that were </span>
<span class="comment">#     from me and added user_id 1 to them.</span>
<span class="comment"># </span>
<span class="comment"># Uncomment these if you are debugging the script and want to </span>
<span class="comment"># start off on a clean mephisto install</span>
<span class="comment"># ----------------------------------------------------------------</span>
<span class="comment"># Article.find(:all).each(&amp;:destroy)</span>
<span class="comment"># CachedPage.delete_all</span>
<span class="comment"># AssignedSection.delete_all</span>
<span class="comment"># Tagging.delete_all</span>
<span class="comment"># Tag.delete_all</span>

<span class="instance-variable">@mysite</span> = <span class="string"><span class="delimiter">&quot;</span><span class=
"content">http://www.metaskills.net/</span><span class="delimiter">&quot;</span></span>
<span class="instance-variable">@home</span> = <span class="constant">Section</span>.find_by_name(<span class="string"><span class=
"delimiter">'</span><span class="content">Home</span><span class="delimiter">'</span></span>)

<span class="keyword">class</span> <span class="class">DrupalArticle</span> &lt; <span class="constant">ActiveRecord</span>::<span class=
"constant">Base</span>
  establish_connection <span class="symbol">:drupal</span>
  set_table_name  <span class="symbol">:node</span>
  set_primary_key <span class="symbol">:nid</span>
  has_many <span class="symbol">:comments</span>, <span class="symbol">:class_name</span> =&gt; <span class="string"><span class=
"delimiter">'</span><span class="content">DrupalComment</span><span class="delimiter">'</span></span>, <span class=
"symbol">:foreign_key</span> =&gt; <span class="string"><span class="delimiter">'</span><span class="content">nid</span><span class=
"delimiter">'</span></span>
  has_one <span class="symbol">:version</span>, <span class="symbol">:class_name</span> =&gt; <span class="string"><span class=
"delimiter">'</span><span class="content">DrupalArticleVerson</span><span class="delimiter">'</span></span>, <span class=
"symbol">:foreign_key</span> =&gt; <span class="string"><span class="delimiter">'</span><span class="content">nid</span><span class=
"delimiter">'</span></span>
  <span class="keyword">def</span> <span class="function">created_at</span> ; <span class="constant">Time</span>.at(<span class=
"predefined-constant">self</span>[<span class="symbol">:created</span>]) ; <span class="keyword">end</span>
<span class="keyword">end</span>
<span class="keyword">class</span> <span class="class">DrupalArticleVerson</span> &lt; <span class="constant">ActiveRecord</span>::<span class=
"constant">Base</span>
  establish_connection <span class="symbol">:drupal</span>
  set_table_name  <span class="symbol">:node_revisions</span>
  set_primary_key <span class="symbol">:vid</span>
<span class="keyword">end</span>
<span class="keyword">class</span> <span class="class">DrupalComment</span> &lt; <span class="constant">ActiveRecord</span>::<span class=
"constant">Base</span>
  establish_connection <span class="symbol">:drupal</span>
  set_table_name  <span class="symbol">:comments</span>
  set_primary_key <span class="symbol">:cid</span>
  belongs_to <span class="symbol">:article</span>, <span class="symbol">:class_name</span> =&gt; <span class="string"><span class=
"delimiter">'</span><span class="content">DrupalArticle</span><span class="delimiter">'</span></span>, <span class=
"symbol">:foreign_key</span> =&gt; <span class="string"><span class="delimiter">'</span><span class="content">nid</span><span class=
"delimiter">'</span></span>
<span class="keyword">end</span>

<span class="constant">DrupalArticle</span>.find(<span class="symbol">:all</span>).each <span class="keyword">do</span> |da|
  <span class="comment"># Creating the article</span>
  na = <span class="constant">Article</span>.new
  na.site_id      = <span class="integer">1</span>
  na.created_at   = da.created_at
  na.published_at = da.created_at
  na.updated_at   = <span class="constant">Time</span>.now
  na.title        = da.title
  na.body         = da.version.body
  na.excerpt      = da.version.teaser
  na.updater_id   = <span class="integer">1</span>
  na.user_id      = <span class="integer">1</span>
  na.save!
  na.sections &lt;&lt; <span class="instance-variable">@home</span>
  <span class="comment"># Creating comments for this article</span>
  da.comments.each <span class="keyword">do</span> |dac|
    nac = na.comments.build
    nac.site_id       = <span class="integer">1</span>
    nac.created_at    = <span class="constant">Time</span>.at(dac.timestamp)
    nac.published_at  = <span class="constant">Time</span>.at(dac.timestamp)
    nac.updated_at    = <span class="constant">Time</span>.at(dac.timestamp)
    nac.author        = dac.name
    nac.author_url    = dac.homepage
    nac.author_email  = dac.mail
    nac.author_ip     = dac.hostname
    nac.user_agent    = <span class="string"><span class="delimiter">&quot;</span><span class=
"content">Mozilla/5.0 (Macintosh; U; PPC Mac OS X; en) AppleWebKit/523.12.2 (KHTML, like Gecko) Version/3.0.4 Safari/523.12.2</span><span class=
"delimiter">&quot;</span></span>
    nac.referrer      = <span class="instance-variable">@mysite</span>
    nac.approved      = <span class="predefined-constant">true</span>
    nac.title         = dac.subject
    nac.body          = dac.comment
    nac.save!
  <span class="keyword">end</span>
<span class="keyword">end</span>
</pre>
              </div>
            </div>
          </div>
          <footer id="disqus_thread">
            <script type="text/javascript">
var disqus_shortname = 'metaskillsnet';
            var disqus_identifier = '/2008/03/22/metaskills-net-reborn-on-mephisto/';
            var disqus_title = "MetaSkills.net Reborn on Mephisto";
            (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
            </script>
          </footer>
        </article>
      </section>
      <nav>
        <div>
          <a href="http://www.youtube.com/watch?v=8pBTK-pdMP0">Society for coding things on top of other things!</a>
        </div>
        <h3>
          Categories
        </h3>
        <ul>
          <li>
            <a href="/categories/heuristics.html">Heuristics</a>
          </li>
          <li>
            <a href="/categories/workflow.html">Workflow</a>
          </li>
          <li>
            <a href="/categories/apple-os.html">Apple/OS</a>
          </li>
          <li>
            <a href="/categories/database.html">Database</a>
          </li>
          <li>
            <a href="/categories/lifestyle.html">Lifestyle</a>
          </li>
          <li>
            <a href="/categories/miscellaneous.html">Miscellaneous</a>
          </li>
          <li>
            <a href="/categories/ruby-rails.html">Ruby/Rails</a>
          </li>
          <li>
            <a href="/categories/javascript.html">JavaScript</a>
          </li>
          <li>
            <a href="/categories/tools.html">Tools</a>
          </li>
        </ul>
      </nav>
    </section>
    <footer id="foot">
      <section id="footer">
        <section id="recentposts">
          <h3>
            Recent Posts
          </h3>
          <article>
            <h4>
              Instrumenting Your Code With ActiveSupport Notifications
            </h4>
            <p>
              <a href="/2013/12/15/instrumenting-your-code-with-activesupport-notifications">Have you ever wondered how tools like New Relic are able
              to gain valuable metrics to your Rails application's internals? Or maybe you are interested in learning how to write...</a>
            </p>
          </article>
          <article>
            <h4>
              Using Dotenv In Rails
            </h4>
            <p>
              <a href="/2013/10/03/using-dotenv-in-rails">Environment variables as a configuration means are everywhere in Ruby. For instance,
              ActiveRecord will use the single `DATABASE_URL` environment variable for every part of it's configuration, no database.yml needed!
              If...</a>
            </p>
          </article>
          <article>
            <h4>
              Jekyll Tips And Tricks
            </h4>
            <p>
              <a href="/2013/09/02/jekyll-tips-and-tricks">IT'S DANGEROUS TO GO ALONE! TAKE THIS! Our t-shirt fund-raiser on Booster.com only has a
              few days left. Don't miss out on this 8-bit-tacular Ruby shirt! Available in men, ladies...</a>
            </p>
          </article>
          <aside id="powered">
            <span>Powered by <a href="http://jekyllrb.com">Jekyll</a> and <a href="http://disqus.com">Disqus</a>. Check out <a href=
            "https://github.com/metaskills/metaskills.net">the code</a>.</span><br>
            <span>&copy; 2006-2014 Ken Collins. All rights reserved.</span>
          </aside>
          <aside id="html5_badge">
            <a href="http://www.w3.org/html/logo/"></a>
          </aside>
        </section>
        <section id="badges">
          <ul>
            <li>
              <a id="badge_757rb" href="http://757rb.org/"></a>
            </li>
            <li>
              <a id="badge_speakerdeck" href="http://speakerdeck.com/u/metaskills"></a>
            </li>
            <li>
              <a id="badge_railscore" href="http://contributors.rubyonrails.org/contributors/ken-collins/commits"></a>
            </li>
            <li>
              <a id="badge_pragalumni" href="http://alumni.pragmaticstudio.com/users/128"></a>
            </li>
            <li>
              <a id="badge_js" href="https://developer.mozilla.org/en/JavaScript" title='JavaScript'>JavaScript</a>
            </li>
            <li>
              <a id="badge_ios" href="http://developer.apple.com/"></a>
            </li>
            <li>
              <a id="badge_linkedin" href="http://www.linkedin.com/in/metaskills"></a>
            </li>
          </ul>
        </section>
        <section id="blogroll">
          <h3>
            Blogroll
          </h3>
          <ul>
            <li>
              <a href="http://technology.customink.com">CustomInk Technology</a>
            </li>
            <li>
              <a href="http://fearoffish.com">Jamie van Dyke</a>
            </li>
            <li>
              <a href="http://ryan.mcgeary.org/">Ryan McGeary</a>
            </li>
            <li>
              <a href="http://www.buzzwordcompliant.net/">Mike Buckbee</a>
            </li>
            <li>
              <a href="http://brennandunn.com">Brennan Dunn</a>
            </li>
            <li>
              <a href="http://evan.tiggerpalace.com">Evan Light</a>
            </li>
            <li>
              <a href="http://techiferous.com">Wyatt Greene</a>
            </li>
            <li>
              <a href="http://www.engineyard.com/blog/author/wayneseguin/">Wayne E. Sequin</a>
            </li>
          </ul>
        </section>
      </section>
    </footer>
  </body>
</html>
