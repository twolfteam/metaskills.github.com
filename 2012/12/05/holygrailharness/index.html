<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="author" content="Ken Collins">
    <meta name="google-site-verification" content="W3DG-CkoWHypH24OfrGmGbMezvhC6AyLql4jLI7hXhI">
    <title>
      HolyGrailHarness @MetaSkills.net
    </title>
    <link rel="alternate" type="application/atom+xml" href="http://feeds.feedburner.com/metaskills" title="MetaSkills.net">
    <link rel="author" href="mailto:ken@metaskills.net">
    <link rel="stylesheet" href="/resource/reset.css">
    <link rel="stylesheet" href="/resource/site.css">
    <link rel="shortcut icon" href="/favicon.png">
    <script src="/resource/jquery-1.7.1.min.js">
</script>
    <script src="/resource/site.js">
</script>
  </head>
  <body>
    <header id="mast">
      <div class="content">
        <section id="identity">
          <div id="avatar"></div>
          <div>
            MetaSkills.net
          </div>
          <div>
            Coding things under other things!
          </div>
        </section>
        <nav>
          <ul>
            <li>
              <a href="/" class="button" data-icon="H">Home</a>
            </li>
            <li>
              <a href="/pages/colophon.html" class="button" data-icon="U">About Me</a>
            </li>
            <li>
              <a href="/pages/projects.html" class="button" data-icon="x">Projects</a>
            </li>
            <li>
              <a href="/pages/resume.html" class="button" data-icon="N">Resume</a>
            </li>
            <li>
              <a href="http://twitter.com/metaskills" class="button" data-icon="B">Twitter</a>
            </li>
            <li>
              <a href="/archive.html" class="button" data-icon="l">Archives</a>
            </li>
          </ul>
        </nav>
      </div>
    </header>
    <section id="page">
      <section id="content">
        <article id="post">
          <header>
            <time pubdate="" datetime="2012-12-05T00:00:00-05:00"><span class="day">05</span> <span class="month">Dec</span> <span class=
            "year">2012</span></time>
            <h1>
              HolyGrailHarness
            </h1>
          </header>
          <aside class="flash_info">
            <a href="http://raw.github.com/metaskills/holy_grail_harness">The latest README for HolyGrailHarness will always be on the Github project
            page.</a>
          </aside>
          <p>
            <img src="https://raw.github.com/metaskills/holy_grail_harness/master/app/assets/images/holy_grail_harness.png" height="435" width="268"
            style="float:right; margin:0 0 10px 20px;">
          </p>
          <p>
            A curated Rails application prototype that focuses on simple test patterns for Ruby &amp; JavaScript!
          </p>
          <p>
            Unlike normal <a href="http://guides.rubyonrails.org/rails_application_templates.html">Rails Application Templates</a> or more modern
            Rails application generators like <a href="http://railsapps.github.com/rails-composer/">Rails Composer</a>, the HolyGrailHarness is a
            basic Rails application that can be considered a prototype and customized via a simple setup script. It is also somewhat opinionated in
            that it promotes simple and powerful testing choices and focuses on using Ruby 1.9 and up, MiniTest::Spec, Capybara,
            Poltergeist/PhantomJS, and Konacha. More details on each component and what HolyGrailHarness provides are below.
          </p>
          <p>
            The HolyGrailHarness is perfect for any of the following:
          </p>
          <ul>
            <li>Bootstrapping your next Rails application.
            </li>
            <li>Learning and promoting MiniTest::Spec
            </li>
            <li>Modern JavaScript testing setups.
            </li>
            <li>Teaching Rails and/or JavaScript at your next meetup.
            </li>
          </ul>
          <h1 id="usage">
            Usage
          </h1>
          <ul>
            <li>
              <a href="https://github.com/metaskills/holy_grail_harness/archive/master.zip">Download</a> the project.
            </li>
            <li>Now from the root of “holy_grail_harness” directory.
            </li>
          </ul>
          <div>
            <div class="CodeRay">
              <div class="code">
                <pre>
puts <span class="string"><span class="delimiter">&quot;</span><span class="content">This code will be highlighted</span><span class=
"delimiter">&quot;</span></span>
</pre>
              </div>
            </div>
          </div>
          <p>
            Make sure to replace <code>my_app_name</code> above with the name of your new Rails application. The setup script has a few options, but
            the end result will be a new Rails application all ready to go. <strong>So why not a normal Rails application template?</strong>
            Although, Rails application templates provide a really nice feature set. It was much easier to bootstrap a new Rails application using
            this prototype method. The end result is a cleaner Gemfile and application setup that can be vetted and tested from within
            HolyGrailHarness itself.
          </p>
          <p>
            The script will rename your directory and prompt you to <code>cd</code> to that directory. Once you do that, run <code>rake
            test:all</code> to see that everything is working.
          </p>
          <div>
            <div class="CodeRay">
              <div class="code">
                <pre>
$ cd ../my_app_name
$ bundle exec rake test:all
</pre>
              </div>
            </div>
          </div>
          <h1 id="rails-3">
            Rails 3
          </h1>
          <p>
            This application prototype will focus on the latest Rails version. At this time, the bundle is locked down to v3.2.9. As Rails updates
            and is compatible with each component, so will this prototype application be updated. The bundle includes:
          </p>
          <ul>
            <li>
              <a href="https://github.com/evrone/quiet_assets">QuietAssets</a> gem for silent pipeline logging.
            </li>
            <li>
              <a href="https://github.com/macournoyer/thin/">Thin</a> webserver. Primarily to be automatically used by Konacha but also good for
              development if you are not using something like <a href="http://pow.cx">Pow</a>.
            </li>
          </ul>
          <h1 id="testing">
            Testing
          </h1>
          <h3 id="minitestspec-all-the-way-across-the-sky">
            MiniTest::Spec All The Way Across The Sky!
          </h3>
          <p>
            Don’t wait for Rails 4 to use MiniTest::Spec! This application is using the <a href=
            "https://github.com/metaskills/minitest-spec-rails">minitest-spec-rails</a> gem which forces <code>ActiveSupport::TestCase</code> to
            subclass <code>MiniTest::Spec</code>. This means that you can start using the MiniTest’s Spec or Unit structure and assertions directly
            within the familiar Rails unit, functional, or integration directories. For full details, check out the <a href=
            "https://github.com/metaskills/minitest-spec-rails">minitest-spec-rails</a> documentation or some of the <a href=
            "https://github.com/metaskills/holy_grail_harness/blob/master/test/functional/application_controller_test.rb">test shims</a> within
            HolyGrailHarness. For example, a <code>test/unit/user_test.rb</code> might look like this.
          </p>
          <div>
            <div class="CodeRay">
              <div class="code">
                <pre>
require <span class="string"><span class="delimiter">'</span><span class="content">test_helper</span><span class="delimiter">'</span></span>

<span class="keyword">class</span> <span class="class">UserTest</span> &lt; <span class="constant">ActiveSupport</span>::<span class=
"constant">TestCase</span>
  
  let(<span class="symbol">:bob</span>)   { users(<span class="symbol">:bob</span>) }
  let(<span class="symbol">:admin</span>) { users(<span class="symbol">:admin</span>) }

  it <span class="string"><span class="delimiter">'</span><span class=
"content">must respond true to #admin? for administrators only</span><span class="delimiter">'</span></span> <span class="keyword">do</span>
    admin.must_be <span class="symbol">:admin?</span>
    bob.wont_be   <span class="symbol">:admin?</span>
  <span class="keyword">end</span>

<span class="keyword">end</span>
</pre>
              </div>
            </div>
          </div>
          <h3 id="capybara-integration-tests-with-poltergeist-using-phantomjs">
            Capybara Integration Tests With Poltergeist Using PhantomJS
          </h3>
          <p>
            You don’t need Cucumber to write good integration tests. Instead use the basic <a href=
            "https://github.com/jnicklas/capybara#the-dsl">Capybara DSL</a> directly within a Rails integration tests with the most bad ass driver
            available, <a href="https://github.com/jonleighton/poltergeist">Poltergeist</a>, which is built on top of <a href=
            "http://phantomjs.org">PhantomJS</a>. Never again worry about installing Qt so you can compile capybara-webkit, just go download a
            <a href="http://phantomjs.org/download.html">pre-compiled PhantomJS binary</a> for your specific platform and enjoy 20% faster
            integration test runs vs capybara-webkit.
          </p>
          <p>
            Integration tests are still within the <code>ActionDispatch::IntegrationTest</code> class and as promised, MiniTest::Spec is available
            here too. Each test file needs to require the <a href=
            "https://github.com/metaskills/holy_grail_harness/blob/master/test/test_helper_integration.rb">test_helper_integration</a> which provides
            the following base features.
          </p>
          <ul>
            <li>Sets page size to that of a 13” MacBook Air.
            </li>
            <li>Resets Capybara sessions after each test.
            </li>
            <li>Provides a <code>#save_and_open_page</code>, or <code>#page!</code> for short, screen shot method.
            </li>
            <li>Ensures a single ActiveRecord DB connection for transactional test runs.
            </li>
            <li>An <code>#execjs</code> helper for bridging Ruby and the JavaScript under test.
            </li>
          </ul>
          <p>
            HolyGrailHarness comes with a integration test example in the <a href=
            "https://github.com/metaskills/holy_grail_harness/blob/master/test/integration/application_test.rb">test/integration/application_test.rb</a>
            file. An integration test might look something like this.
          </p>
          <div>
            <div class="CodeRay">
              <div class="code">
                <pre>
require <span class="string"><span class="delimiter">'</span><span class="content">test_helper_integration</span><span class=
"delimiter">'</span></span>

<span class="keyword">class</span> <span class="class">ApplicationTest</span> &lt; <span class="constant">ActionDispatch</span>::<span class=
"constant">IntegrationTest</span>
  
  before { visit root_path }

  let(<span class="symbol">:h1</span>) { find <span class="string"><span class="delimiter">'</span><span class="content">h1</span><span class=
"delimiter">'</span></span> }

  it <span class="string"><span class="delimiter">'</span><span class="content">renders</span><span class="delimiter">'</span></span> <span class=
"keyword">do</span>
    h1.must_be <span class="symbol">:present?</span>
  <span class="keyword">end</span>

<span class="keyword">end</span>
</pre>
              </div>
            </div>
          </div>
          <h3 id="konacha-javascript-tests-using-phantomjs">
            Konacha JavaScript Tests Using PhantomJS
          </h3>
          <p>
            Move over Jasmine(rice), <a href="https://github.com/jfirebaugh/konacha">Konacha</a> is the way to test your JavaScript now. Konacha is a
            Rails engine that allows you to test your JavaScript with the <a href="http://visionmedia.github.com/mocha/">Mocha</a> test framework and
            <a href="http://chaijs.com">Chai</a> assertion library. Konacha’s killer feature is a sandboxed <code>&lt;iframe&gt;</code> for each test
            spec to run within as well as full Rails asset pipeline integration. The HolyGrailHarness does all the work to get your Konacha <a href=
            "https://github.com/metaskills/holy_grail_harness/tree/master/spec/javascripts"><code>spec/javascripts</code></a> directory all setup and
            ready to go. Highlights include:
          </p>
          <ul>
            <li>An <a href="https://github.com/metaskills/holy_grail_harness/blob/master/config/initializers/konacha.rb">initializer</a> that sets up
            Poltergeist as the Capybara driver.
            </li>
            <li>A directory structure for model, view, and controller specs.
            </li>
            <li>A <a href=
            "https://github.com/metaskills/holy_grail_harness/blob/master/spec/javascripts/spec_helper.js.coffee"><code>spec_helper.js.coffee</code></a>
            for your specs to require. Provides global setup, configurations and vendor requires.
            </li>
          </ul>
          <p>
            HolyGrailHarness also has a <a href=
            "https://github.com/metaskills/holy_grail_harness/tree/master/spec/javascripts/spec_helper"><code>spec/javascripts/spec_helper</code></a>
            directory meant for helpers and extensions that should be available to all specs. We have included a <a href=
            "https://github.com/metaskills/holy_grail_harness/blob/master/spec/javascripts/spec_helper/fixtures.js.coffee"><code>fixtures.js.coffee</code></a>
            file that demonstrates how to setup JSON data fixtures for use from anything to stubbing requests to instantiating new model objects. We
            also have a <a href=
            "https://github.com/metaskills/holy_grail_harness/blob/master/spec/javascripts/spec_helper/helpers.js.coffee"><code>helpers.js.coffee</code></a>
            file that exposes a few top level functions that make debugging your JavaScript easy. Below are the vendored JavaScript libraries that
            are required by the <code>spec_helper</code>.
          </p>
          <ul>
            <li>
              <a href="http://sinonjs.org">Sinon.JS</a> - For spies, stubs, faking time, etc.
            </li>
            <li>
              <a href="https://github.com/appendto/jquery-mockjax">jQuery Mockjax</a> - Best way to mock jQuery’s AJAX functions.
            </li>
            <li>
              <a href="https://github.com/chaijs/chai-jquery">Chai jQuery</a> - Chai assertions for jQuery.
            </li>
            <li>
              <a href="http://github.com/NV/jsDump">jsDump</a> - Used by the <code>myLog()</code> helper.
            </li>
          </ul>
          <p>
            Because your CI system should run all your tests, the HolyGrailHarness has added a Rake task to the test namespace that runs the default
            rails test task (units, functional, integrations) then your Konacha tests.
          </p>
          <div>
            <div class="CodeRay">
              <div class="code">
                <pre>
$ rake test:all     # Runs all Rails tests, then Konacha tests.
</pre>
              </div>
            </div>
          </div>
          <h3 id="guard">
            Guard
          </h3>
          <p>
            TDD in style and run your tests when you hit save! Both <a href="https://github.com/guard/guard-minitest">guard-minitest</a> and <a href=
            "https://github.com/alexgb/guard-konacha">guard-konacha</a> are bundled and ready to go. A basic <code>Guardfile</code> is already setup
            too. Unlike most, this one is split into two groups <code>:ruby</code> or <code>:js</code>. This lets you focus on either everything or a
            specific language for your tests.
          </p>
          <div>
            <div class="CodeRay">
              <div class="code">
                <pre>
$ guard             # Monitor both Ruby and JavaScript tests.
$ guard -g ruby     # Monitor Ruby tests.
$ guard -g js       # Monitor JavaScript tests.
</pre>
              </div>
            </div>
          </div>
          <p>
            The Guardfile assumes you are running OS X and wish to use the Ruby GNTP (Growl Notification Transport Protocol). If this is not the
            case, consult the Guard documentation on different <a href="https://github.com/guard/guard#system-notifications">system notification</a>
            alternatives.
          </p>
          <h3 id="factories-and-fixtures">
            Factories And Fixtures
          </h3>
          <p>
            ActiveRecord YAML fixtures suck, but so do slow tests that rely on an empty database with excessive setups based on factories. The
            answer? Take advantage of the best each has to offer. Use factories to populate fixtures into the test database while leveraging database
            transactions during your test runs. The end result is a known factory story with the ability to create more test data as needed using the
            same factories. Allowing factories to properly hook into model logic means no more decomposing business logic into YAML text files. How?
          </p>
          <p>
            The HolyGrailHarness bundles the <a href="https://github.com/metaskills/named_seeds">named_seeds</a> gem along with the <a href=
            "https://github.com/thoughtbot/factory_girl">factory_girl</a> gem. The NamedSeeds library checks for the existence of a <a href=
            "https://github.com/metaskills/holy_grail_harness/blob/master/db/test/seeds.rb"><code>db/test/seeds.rb</code></a> file and if present,
            loads that file. Just like Rails’ own <code>db/seeds.rb</code> anything in this file goes. The only difference is that this seed file is
            populated right before you tests are run so they persist between transactions. You also get the benefit of using this same seed data in
            development as part of the normal Rails <code>db:setup</code> process. Read the <a href=
            "https://github.com/metaskills/named_seeds#namedseeds">full documentationn</a> on their site on how to use it. Below is a brief example.
          </p>
          <p>
            Create factories in the <code>test/factories</code> directory. Note, factories are best when they make <code>valid garbage™</code>, so
            the HolyGrailHarness also requires the <a href="https://github.com/sevenwire/forgery">forgery</a> gem to help with that.
          </p>
          <div>
            <div class="CodeRay">
              <div class="code">
                <pre>
<span class="comment"># In test/factories/user_factory.rb</span>

<span class="constant">FactoryGirl</span>.define <span class="keyword">do</span>
  
  factory <span class="symbol">:user</span> <span class="keyword">do</span>
    email      { <span class="constant">Forgery</span>::<span class="constant">Email</span>.address }
    first_name { <span class="constant">Forgery</span>::<span class="constant">Name</span>.first_name }
    last_name  { <span class="constant">Forgery</span>::<span class="constant">Name</span>.first_name }
    password   <span class="string"><span class="delimiter">'</span><span class="content">test</span><span class="delimiter">'</span></span>  
  <span class="keyword">end</span>
  
<span class="keyword">end</span>
</pre>
              </div>
            </div>
          </div>
          <p>
            When making seed data, be explicit with your attributes that may be forged in the factory, database seeds should be consistent and have
            meaningful attributes. In this example we are creating an admin user. Note too how we are using <code>NamedSeeds.identify</code> which
            mimics AcctiveRecord’s fixture identity. This gives us a handle to the fixture within our tests. We also create the <code>@admin</code>
            instance variable because we might want to use that user later on in the fixture story.
          </p>
          <div>
            <div class="CodeRay">
              <div class="code">
                <pre>
<span class="comment"># In db/test/seeds.rb</span>

require <span class="string"><span class="delimiter">'</span><span class="content">factory_girl</span><span class="delimiter">'</span></span>
<span class="constant">FactoryGirl</span>.find_definitions <span class="keyword">rescue</span> <span class="predefined-constant">true</span>
include <span class="constant">FactoryGirl</span>::<span class="constant">Syntax</span>::<span class="constant">Methods</span>

<span class="instance-variable">@admin</span> = create <span class="symbol">:user</span>, <span class="key">id</span>: <span class=
"constant">NamedSeeds</span>.identify(<span class="symbol">:admin</span>), 
                       <span class="key">first_name</span>: <span class="string"><span class="delimiter">'</span><span class=
"content">Admin</span><span class="delimiter">'</span></span>, <span class="key">last_name</span>: <span class="string"><span class=
"delimiter">'</span><span class="content">User</span><span class="delimiter">'</span></span>, <span class="key">email</span>: <span class=
"string"><span class="delimiter">'</span><span class="content">admin@test.com</span><span class="delimiter">'</span></span>
</pre>
              </div>
            </div>
          </div>
          <p>
            Lastly, in your <a href=
            "https://github.com/metaskills/holy_grail_harness/blob/master/test/test_helper.rb"><code>test/test_helper.rb</code></a> file, declare
            that you have a named seed to the users model. This will allow your tests to act just like those with ActiveRecord fixtures and use the
            <code>users(:admin)</code> helper to get to that seeded fixture.
          </p>
          <div>
            <div class="CodeRay">
              <div class="code">
                <pre>
<span class="comment"># In test/test_helper.rb</span>

<span class="keyword">class</span> <span class="class">ActiveSupport::TestCase</span>
  
  named_seeds <span class="symbol">:users</span>

<span class="keyword">end</span>
</pre>
              </div>
            </div>
          </div>
          <h1 id="mvc-javascript">
            MVC JavaScript
          </h1>
          <p>
            The HolyGrailHarness wants you to use some type MV* structure for your JavaScript. The setup script supports <a href=
            "http://spinejs.com">Spine.js</a> as an option, however you can decline and all traces of Spine.js will be removed. If so, the following
            features will still remain.
          </p>
          <p>
            A single JavaScript <a href=
            "https://github.com/metaskills/holy_grail_harness/blob/master/app/assets/javascripts/holy_grail_harness/lib/namespaces.js.coffee">namespace</a>
            on the window object. This namespace creates a model, view, controller object structure that direly matches to the <a href=
            "https://github.com/metaskills/holy_grail_harness/tree/master/app/assets/javascripts/holy_grail_harness"><code>app/assets/javascripts/#{my_app_name}/(model|view|controller)</code></a>
            directory structure within the Rails asset pipeline. This JavaScript namespace and matching directories will be changed to your new
            application name as part of the setup task. Here is an example of a User model whose corresponding file would be found in the
            <code>app/assets/javascripts/my_app_name/models/user.js.coffee</code> file.
          </p>
          <div>
            <div class="CodeRay">
              <div class="code">
                <pre>
class @MyAppName.App.Models.User extends View  
  @configure 'User', 'id', 'email'
</pre>
              </div>
            </div>
          </div>
          <p>
            The main <a href=
            "https://github.com/metaskills/holy_grail_harness/blob/master/app/assets/javascripts/application.js"><code>application.js</code></a> file
            requires all vendor frameworks, then the <a href=
            "https://github.com/metaskills/holy_grail_harness/blob/master/app/assets/javascripts/holy_grail_harness/index.js.coffee"><code>index.js.coffee</code></a>
            within your application name directory. Use this file to boot your JavaScript application and/or setup your root view controller.
          </p>
          <p>
            Also included is the <a href="https://github.com/nathansobo/space-pen">SpacePen</a> view framework. SpacePen is a powerful and minimalist
            client-side view framework authored in CoffeeScript. It is actually a jQuery subclass which makes your views really easy to traverse and
            respond to controller events. Read my <a href=
            "http://metaskills.net/2012/05/22/view-controller-patterns-with-spine-js-and-spacepen/"><em>View Controller Patterns With Spine.js &amp;
            SpacePen</em></a> article to learn why views should not be dumb and how you can take advantage of SpacePen no matter what JavaScript MV*
            framework you use.
          </p>
          <h3 id="with-spinejs">
            With Spine.js
          </h3>
          <p>
            If you choose to use Spine.js as your JavaScript MVC structure, the setup script will create a git submodule to the Spine repository to
            the <code>vendor/assets/javascripts/spine</code> directory. This allows your project to use the the source CoffeeScript files, which
            makes for a wonderful <a href="http://metaskills.net/2012/01/15/rails-and-spine-js-using-the-coffeescript-source/">learning
            experience</a> to both Spine.js and idomatic CoffeeScript.
          </p>
          <p>
            By default the <a href=
            "https://github.com/metaskills/holy_grail_harness/blob/master/app/assets/javascripts/holy_grail_harness/index.js.coffee"><code>index.js.coffee</code></a>
            will require all Spine components. This includes manager (stacks), ajax, route, and relation. Remove anything that you do not need. This
            file also defines the root view controller along with a <code>MyAppName.App.Index.init()</code> class level initialization function. This
            is called in the main <a href=
            "https://github.com/metaskills/holy_grail_harness/blob/master/app/views/layouts/application.html.erb"><code>application.html.erb</code></a>
            layout file for you too. Likewise, the application init is done in the Mocha before filters mentioned above in both the <a href=
            "https://github.com/metaskills/holy_grail_harness/blob/master/spec/javascripts/spec_helper.js.coffee"><code>spec_helper.js.coffee</code></a>
            and <a href=
            "https://github.com/metaskills/holy_grail_harness/blob/master/spec/javascripts/spec_helper/fixtures.js.coffee"><code>fixtures.js.coffee</code></a>
            files. If you examine these files closely, you will see how they make use of Mocha’s <code>done()</code> callback so that you can cleanly
            abstract AJAX mocks and anything else related to your JavaScript application’s boot process. Here is an example of how you might setup
            your <code>initApplication()</code>.
          </p>
          <div>
            <div class="CodeRay">
              <div class="code">
                <pre>
@initApplication = (callback) =&gt;
  bob = MyAppName.Test.Seeds.users.bob
  $.mockjax url: &quot;/users/#{bob.id}&quot;, responseText: MyAppName.Test.Response.bobInitial.responseText
  MyAppName.App.Models.User.fetch id: bob.id
  MyAppName.App.Models.User.one 'refresh', callback
</pre>
              </div>
            </div>
          </div>
          <p>
            No JavaScript project should be without a local notification system to help keep disparate components up to date. Thankfully, Spine’s
            event module makes a local PubSub system a breeze. The HolyGrailHarness has a <a href=
            "https://github.com/metaskills/holy_grail_harness/blob/master/app/assets/javascripts/holy_grail_harness/lib/notifications.js.coffee"><code>
            notifications.js.coffee</code></a> that exposes a class level <code>bind()</code> and <code>trigger()</code> to any event
            string/namespace you want. To make more simple, we recommend creating class level functions that expose the event name as the function
            name and pass the args to the <code>handle()</code> function. We have done this for the <code>MyAppName.Notifications.appReady()</code>
            to demonstrate. Calling this function will trigger the <code>app.ready</code> event and passing a function to this function will bind
            that function to the same event name.
          </p>
          <h1 id="sass--compass">
            Sass &amp; Compass
          </h1>
          <p>
            <a href="http://sass-lang.com">Sass</a> is the only way to write CSS for today’s modern web applications. <a href=
            "http://compass-style.org">Compass</a> is the CSS framework that no Sass user should go without. Together they provide a foundation for
            writing beautiful CSS using pre-built time saving functions. The HolyGrailHarness includes both the <a href=
            "https://github.com/rails/sass-rails">sass-rails</a> and <a href="https://github.com/Compass/compass-rails">compass-rails</a> gems.
          </p>
          <p>
            To get you started on the right path, we have also created a basic structure within the <code>app/assets/stylesheets</code> asset
            pipeline directory to help you organize your Sass files. Here is the directory structure below.
          </p>
          <pre>
<code>├── application.css
├── application
│   ├── _layout.scss
│   ├── index.scss
│   ├── components
│   │   └── _foo.scss
└── shared
    ├── _animations.scss
    ├── _fonts.scss
    ├── _mixins.scss
    ├── _placeholders.scss
    ├── _variables.scss
    └── base.scss
</code>
</pre>
          <h3 id="the-applicationcss-file">
            The application.css file.
          </h3>
          <p>
            Never write CSS in <code>application.css</code>. Say what? I know right, but trust me. Just consider this file a top level bundle
            dependency that only requires other top level bundle assets. Here is the contents of that file. Notice how it requires a bundle called
            twitter and an index. One is for twitter bootstrap, see section below, and the other is the index to your own Sass framework.
          </p>
          <div>
            <div class="CodeRay">
              <div class="code">
                <pre>
<span class="comment">/*
 *= require application/twitter
 *= require application/index
*/</span>
</pre>
              </div>
            </div>
          </div>
          <h3 id="the-shared-directory">
            The shared directory.
          </h3>
          <p>
            Think of this as your own Compass framework. The <a href=
            "https://github.com/metaskills/holy_grail_harness/blob/master/app/assets/stylesheets/shared/base.scss"><code>base.scss</code></a> is your
            single file to <code>@import</code> to get everything loaded and ready to go. <strong>Nothing in any of the shared files should generate
            CSS!</strong> Importing <code>shared/base</code> should act just like importing <code>compass</code>. Use these files for setting your
            own variables and creating misc helper functions &amp; mixins. There is a variables file for… variables! Another for animations, fonts
            and mixins too.
          </p>
          <p>
            Pay special attention to the <code>_placeholders.scss</code> file. If you do not know about Sass 3.2’s placeholder selectors (silent
            classes) and how they make presentational classes efficiently extended by semantic ones, then I highly suggest you read Dale Sande’s
            presentation titled <a href="https://speakerdeck.com/anotheruiguy/sass-32-silent-classes">Sass 3.2 Silent Classes</a> on Speaker Deck.
          </p>
          <p>
            Below is the contents of the <code>base.scss</code> file, take note of the order. See too how we import the entire Compass framework.
            This means that all of your Sass code in any of the shared files can take full advantage of both Bootstrap and Compass’ variables and
            mixins. Epic win!
          </p>
          <div>
            <div class="CodeRay">
              <div class="code">
                <pre>
<span class="comment"><span class="delimiter">//</span><span class=
"content"> Think of this file as your own compass. Importing the base, never generates CSS.</span></span>

<span class="directive">@import</span> <span class="string"><span class="delimiter">&quot;</span><span class=
"content">shared/variables</span><span class="delimiter">&quot;</span></span><span class="include">;</span>
<span class="directive">@import</span> <span class="string"><span class="delimiter">&quot;</span><span class=
"content">bootstrap/mixins</span><span class="delimiter">&quot;</span></span><span class="include">;</span>
<span class="directive">@import</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">compass</span><span class=
"delimiter">&quot;</span></span><span class="include">;</span>
<span class="directive">@import</span> <span class="string"><span class="delimiter">&quot;</span><span class=
"content">compass/layout</span><span class="delimiter">&quot;</span></span><span class="include">;</span>
<span class="directive">@import</span> <span class="string"><span class="delimiter">&quot;</span><span class=
"content">compass/css3/user-interface</span><span class="delimiter">&quot;</span></span><span class="include">;</span>
<span class="directive">@import</span> <span class="string"><span class="delimiter">&quot;</span><span class=
"content">shared/fonts</span><span class="delimiter">&quot;</span></span><span class="include">;</span>
<span class="directive">@import</span> <span class="string"><span class="delimiter">&quot;</span><span class=
"content">shared/mixins</span><span class="delimiter">&quot;</span></span><span class="include">;</span>
<span class="directive">@import</span> <span class="string"><span class="delimiter">&quot;</span><span class=
"content">shared/animations</span><span class="delimiter">&quot;</span></span><span class="include">;</span>
<span class="directive">@import</span> <span class="string"><span class="delimiter">&quot;</span><span class=
"content">shared/placeholders</span><span class="delimiter">&quot;</span></span><span class="include">;</span>
</pre>
              </div>
            </div>
          </div>
          <h3 id="the-application-directory">
            The application directory.
          </h3>
          <p>
            Organize this as you see fit. We have started you off by creating a <code>_layout.scss</code> file for your general layout/structure
            styles. There is also a <code>components</code> directory which all sub files are imported via a glob. The idea is that components are
            not dependent upon another. Files that might go in here are things like datepicker, navigation, and general files named after components
            or widgets. Below is what the <code>application/index.scss</code> looks like.
          </p>
          <div>
            <div class="CodeRay">
              <div class="code">
                <pre>
<span class="directive">@import</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">shared/base</span><span class=
"delimiter">&quot;</span></span><span class="include">;</span>
<span class="directive">@import</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">./layout</span><span class=
"delimiter">&quot;</span></span><span class="include">;</span>
<span class="directive">@import</span> <span class="string"><span class="delimiter">&quot;</span><span class=
"content">components/*</span><span class="delimiter">&quot;</span></span><span class="include">;</span>
</pre>
              </div>
            </div>
          </div>
          <p>
            If you are more advanced with your CSS and like the idea of style guides, take a looks a the <a href=
            "https://github.com/Anotheruiguy/toadstool">Toadstool</a> style guide framework.
          </p>
          <h1 id="twitter-bootstrap">
            Twitter Bootstrap
          </h1>
          <p>
            <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap</a> is awesome, but <a href=
            "http://metaskills.net/2012/02/27/too-less-should-you-be-using-sass/">LESS is not</a>. That is why the HolyGrailHarness uses the <a href=
            "https://github.com/thomas-mcdonald/bootstrap-sass">bootstrap-sass</a> gem that converts all the Bootstrap LESS files to Sass. Making
            them ready to import via the Rails asset pipeline.
          </p>
          <p>
            As shown above in the Sass section, we require the <code>application/twitter.scss</code> bundle asset from the top level
            <code>application.css</code> bundle file. This twitter bundle file, contents below, take advantage of your shared variables before
            importing bootstrap from the gem. In this way you can define variables that tweak bootstrap. A good example would be button colors,
            column widths, etc. Later on in the file you can extend bootstrap styles to your liking. For instance, add more padding to buttons.
          </p>
          <div>
            <div class="CodeRay">
              <div class="code">
                <pre>
<span class="directive">@import</span> <span class="string"><span class="delimiter">&quot;</span><span class=
"content">shared/variables</span><span class="delimiter">&quot;</span></span><span class="include">;</span>
<span class="directive">@import</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">bootstrap</span><span class=
"delimiter">&quot;</span></span><span class="include">;</span>
<span class="directive">@import</span> <span class="string"><span class="delimiter">&quot;</span><span class=
"content">font-awesome</span><span class="delimiter">&quot;</span></span><span class="include">;</span>

<span class="comment"><span class="delimiter">//</span><span class="content"> Tweak or redefine Twitter classes below.</span></span>
</pre>
              </div>
            </div>
          </div>
          <h3 id="font-awesome">
            Font Awesome
          </h3>
          <p>
            The glyph icons included in Twitter Bootstrap are horrible for hi-resolution “retina” displays typically found on mobile devices.
            Thankfully the <a href="http://fortawesome.github.com/Font-Awesome/">Font Awesome</a> project provides a drop in replacement that instead
            uses icon fonts vs raster images.
          </p>
          <p>
            The HolyGrailHarness vendors these font files and the needed <code>font-awesome.scss</code> file and requires them as part of the Twitter
            Bootstrap bundle shown above. More advanced users may prefer to only include the icon fonts needed in their application or a few custom
            icons. If that is the case, check out <a href="http://endtwist.github.com/fontcustom/">Font Custom</a>, webfonts from the comfort of the
            command line.
          </p>
          <footer id="disqus_thread">
            <script type="text/javascript">
var disqus_shortname = 'metaskillsnet';
            var disqus_identifier = '/2012/12/05/holygrailharness';
            var disqus_title = "HolyGrailHarness";
            (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
            </script>
          </footer>
        </article>
      </section>
      <nav>
        <div>
          <a href="http://www.youtube.com/watch?v=8pBTK-pdMP0">Society for coding things on top of other things!</a>
        </div>
        <h3>
          Categories
        </h3>
        <ul>
          <li>
            <a href="/categories/heuristics.html">Heuristics</a>
          </li>
          <li>
            <a href="/categories/workflow.html">Workflow</a>
          </li>
          <li>
            <a href="/categories/apple-os.html">Apple/OS</a>
          </li>
          <li>
            <a href="/categories/database.html">Database</a>
          </li>
          <li>
            <a href="/categories/lifestyle.html">Lifestyle</a>
          </li>
          <li>
            <a href="/categories/miscellaneous.html">Miscellaneous</a>
          </li>
          <li>
            <a href="/categories/ruby-rails.html">Ruby/Rails</a>
          </li>
          <li>
            <a href="/categories/javascript.html">JavaScript</a>
          </li>
          <li>
            <a href="/categories/tools.html">Tools</a>
          </li>
        </ul>
      </nav>
    </section>
    <footer id="foot">
      <section id="footer">
        <section id="recentposts">
          <h3>
            Recent Posts
          </h3>
          <article>
            <h4>
              Instrumenting Your Code With ActiveSupport Notifications
            </h4>
            <p>
              <a href="/2013/12/15/instrumenting-your-code-with-activesupport-notifications">Have you ever wondered how tools like New Relic are able
              to gain valuable metrics to your Rails application's internals? Or maybe you are interested in learning how to write...</a>
            </p>
          </article>
          <article>
            <h4>
              Using Dotenv In Rails
            </h4>
            <p>
              <a href="/2013/10/03/using-dotenv-in-rails">Environment variables as a configuration means are everywhere in Ruby. For instance,
              ActiveRecord will use the single `DATABASE_URL` environment variable for every part of it's configuration, no database.yml needed!
              If...</a>
            </p>
          </article>
          <article>
            <h4>
              Jekyll Tips And Tricks
            </h4>
            <p>
              <a href="/2013/09/02/jekyll-tips-and-tricks">IT'S DANGEROUS TO GO ALONE! TAKE THIS! Our t-shirt fund-raiser on Booster.com only has a
              few days left. Don't miss out on this 8-bit-tacular Ruby shirt! Available in men, ladies...</a>
            </p>
          </article>
          <aside id="powered">
            <span>Powered by <a href="http://jekyllrb.com">Jekyll</a> and <a href="http://disqus.com">Disqus</a>. Check out <a href=
            "https://github.com/metaskills/metaskills.net">the code</a>.</span><br>
            <span>&copy; 2006-2014 Ken Collins. All rights reserved.</span>
          </aside>
          <aside id="html5_badge">
            <a href="http://www.w3.org/html/logo/"></a>
          </aside>
        </section>
        <section id="badges">
          <ul>
            <li>
              <a id="badge_757rb" href="http://757rb.org/"></a>
            </li>
            <li>
              <a id="badge_speakerdeck" href="http://speakerdeck.com/u/metaskills"></a>
            </li>
            <li>
              <a id="badge_railscore" href="http://contributors.rubyonrails.org/contributors/ken-collins/commits"></a>
            </li>
            <li>
              <a id="badge_pragalumni" href="http://alumni.pragmaticstudio.com/users/128"></a>
            </li>
            <li>
              <a id="badge_js" href="https://developer.mozilla.org/en/JavaScript" title='JavaScript'>JavaScript</a>
            </li>
            <li>
              <a id="badge_ios" href="http://developer.apple.com/"></a>
            </li>
            <li>
              <a id="badge_linkedin" href="http://www.linkedin.com/in/metaskills"></a>
            </li>
          </ul>
        </section>
        <section id="blogroll">
          <h3>
            Blogroll
          </h3>
          <ul>
            <li>
              <a href="http://technology.customink.com">CustomInk Technology</a>
            </li>
            <li>
              <a href="http://fearoffish.com">Jamie van Dyke</a>
            </li>
            <li>
              <a href="http://ryan.mcgeary.org/">Ryan McGeary</a>
            </li>
            <li>
              <a href="http://www.buzzwordcompliant.net/">Mike Buckbee</a>
            </li>
            <li>
              <a href="http://brennandunn.com">Brennan Dunn</a>
            </li>
            <li>
              <a href="http://evan.tiggerpalace.com">Evan Light</a>
            </li>
            <li>
              <a href="http://techiferous.com">Wyatt Greene</a>
            </li>
            <li>
              <a href="http://www.engineyard.com/blog/author/wayneseguin/">Wayne E. Sequin</a>
            </li>
          </ul>
        </section>
      </section>
    </footer>
  </body>
</html>
